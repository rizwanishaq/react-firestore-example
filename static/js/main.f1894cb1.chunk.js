(this["webpackJsonpfull-stack-challenge-devistry"]=this["webpackJsonpfull-stack-challenge-devistry"]||[]).push([[0],{63:function(e,t,a){e.exports=a(84)},68:function(e,t,a){},69:function(e,t,a){},84:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(18),l=a.n(c),u=(a(68),a(69),a(23)),i=a(6),o=a(7),s=a.n(o),m=a(13),p=a(11),d=a(89),f=a(90),E=a(53),v=a(29),h=a.n(v);a(71),a(73);h.a.initializeApp({apiKey:"AIzaSyCzcFy286wZkQ4hH0u-0qt_jGvQJq5Yy6E",authDomain:"devistry-challenge.firebaseapp.com",databaseURL:"https://devistry-challenge.firebaseio.com",projectId:"devistry-challenge",storageBucket:"devistry-challenge.appspot.com",messagingSenderId:"578965841932",appId:"1:578965841932:web:930919b3360b315f03e629"});var b=h.a.auth(),g=h.a.firestore(),j=function(){var e=Object(m.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.signInWithPopup(new h.a.auth.GoogleAuthProvider);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=Object(n.createContext)(),y=function(e){var t=e.children,a=Object(n.useState)(void 0),c=Object(p.a)(a,2),l=c[0],u=c[1];return Object(n.useEffect)((function(){b.onAuthStateChanged((function(e){u(e)}))}),[l]),r.a.createElement(O.Provider,{value:{user:l}},t)},x=function(e){var t=e.history,a=Object(n.useContext)(O).user,c=Object(n.useState)(""),l=Object(p.a)(c,2),u=l[0],i=l[1],o=Object(n.useState)(""),v=Object(p.a)(o,2),h=v[0],b=v[1],j=Object(n.useState)(""),y=Object(p.a)(j,2),x=y[0],C=y[1],k=function(){var e=Object(m.a)(s.a.mark((function e(n){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),r=h.split(","),e.next=4,g.collection("users").doc(a.uid).collection("recipes").add({name:u,ingredients:r,description:x});case 4:i(""),b(""),C(""),t.push("/");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(d.a,null,r.a.createElement(f.a,null,r.a.createElement(f.a.Group,null,r.a.createElement(f.a.Label,null,"Name"),r.a.createElement(f.a.Control,{type:"text",placeholder:"Enter recipe name",value:u,onChange:function(e){return i(e.target.value)}})),r.a.createElement(f.a.Group,null,r.a.createElement(f.a.Label,null,"Ingredients"),r.a.createElement(f.a.Control,{type:"text",placeholder:"Enter Ingredients, separated by comma(,)",value:h,onChange:function(e){return b(e.target.value)}}),r.a.createElement(f.a.Text,{className:"text-muted"},"Use comma(,) for separating ingredients")),r.a.createElement(f.a.Group,null,r.a.createElement(f.a.Label,null,"Description"),r.a.createElement(f.a.Control,{as:"textarea",value:x,onChange:function(e){return C(e.target.value)}})),r.a.createElement(E.a,{variant:"primary",type:"submit",onClick:k},"Submit")))},C=a(93),k=function(){var e=Object(n.useContext)(O).user,t=Object(n.useState)([]),a=Object(p.a)(t,2),c=a[0],l=a[1];return Object(n.useEffect)((function(){e&&function(){var t=Object(m.a)(s.a.mark((function t(){var a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.collection("users").doc(e.uid).collection("recipes").orderBy("name").get();case 2:a=t.sent,l(a.docs);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()}),[e]),r.a.createElement(d.a,{fluid:!0},r.a.createElement("h1",null,"Recipes"),r.a.createElement(C.a,null,c.map((function(e,t){return r.a.createElement(C.a.Item,{key:t},r.a.createElement(u.Link,{to:"/recipe/".concat(e.id)},e.data().name))}))))},w=function(e){var t=e.match,a=e.history,c=Object(n.useContext)(O).user,l=Object(n.useState)(void 0),u=Object(p.a)(l,2),i=u[0],o=u[1],d=function(){var e=Object(m.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.collection("users").doc(c.uid).collection("recipes").doc(t.params.id).delete();case 2:a.push("/");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){c&&function(){var e=Object(m.a)(s.a.mark((function e(){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.collection("users").doc(c.uid).collection("recipes").doc(t.params.id).get();case 2:a=e.sent,o(a.data());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[c,t.params.id]),r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,i&&i.name),r.a.createElement(C.a,null,i&&i.ingredients.map((function(e,t){return r.a.createElement(C.a.Item,{key:t},e)}))),r.a.createElement("p",null,i&&i.description),r.a.createElement("i",{className:"fas fa-trash",onClick:d}),r.a.createElement("i",{class:"fas fa-edit",onClick:function(){return a.push("/edit/".concat(t.params.id))}}),"Edit")},S=a(47),I=a(92),L=a(94),N=a(91),G=function(){var e=Object(n.useContext)(O).user;return r.a.createElement("header",null,r.a.createElement(I.a,{bg:"dark",variant:"dark",expand:"lg",collapseOnSelect:!0},r.a.createElement(d.a,null,r.a.createElement(S.LinkContainer,{to:"/"},r.a.createElement(I.a.Brand,null,r.a.createElement("i",{className:"fas fa-home"}))),r.a.createElement(I.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(I.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(L.a,{className:"ml-auto"},r.a.createElement(S.LinkContainer,{to:"/new"},r.a.createElement(L.a.Link,null,r.a.createElement("i",{className:"fas fa-plus-circle"}),"New Recipe")),e?r.a.createElement(N.a,{title:e.displayName,id:"username"},r.a.createElement(N.a.Item,{onClick:function(){b.signOut()}},"Logout")):r.a.createElement(L.a.Link,{onClick:j},r.a.createElement("i",{className:"fas fa-user"}),"Sign In"))))))},B=function(e){var t=e.match,a=e.history,c=Object(n.useContext)(O).user,l=Object(n.useState)(""),u=Object(p.a)(l,2),i=u[0],o=u[1],v=Object(n.useState)(""),h=Object(p.a)(v,2),b=h[0],j=h[1],y=Object(n.useState)(""),x=Object(p.a)(y,2),C=x[0],k=x[1];Object(n.useEffect)((function(){(function(){var e=Object(m.a)(s.a.mark((function e(){var a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.collection("users").doc(c.uid).collection("recipes").doc(t.params.id).get();case 2:a=e.sent,n=a.data(),o(n.name),j(n.ingredients.toString()),k(n.description);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var w=function(){var e=Object(m.a)(s.a.mark((function e(n){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),r=b.split(","),e.next=4,g.collection("users").doc(c.uid).collection("recipes").doc(t.params.id).set({name:i,ingredients:r,description:C});case 4:o(""),j(""),k(""),a.push("/recipe/".concat(t.params.id));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(d.a,null,r.a.createElement(f.a,null,r.a.createElement(f.a.Group,null,r.a.createElement(f.a.Label,null,"Name"),r.a.createElement(f.a.Control,{type:"text",placeholder:"Enter recipe name",value:i,onChange:function(e){return o(e.target.value)}})),r.a.createElement(f.a.Group,null,r.a.createElement(f.a.Label,null,"Ingredients"),r.a.createElement(f.a.Control,{type:"text",placeholder:"Enter Ingredients, separated by comma(,)",value:b,onChange:function(e){return j(e.target.value)}}),r.a.createElement(f.a.Text,{className:"text-muted"},"Use comma(,) for separating ingredients")),r.a.createElement(f.a.Group,null,r.a.createElement(f.a.Label,null,"Description"),r.a.createElement(f.a.Control,{as:"textarea",value:C,onChange:function(e){return k(e.target.value)}})),r.a.createElement(E.a,{variant:"primary",type:"submit",onClick:w},"Submit")))};var D=function(){return r.a.createElement(u.BrowserRouter,null,r.a.createElement(G,null),r.a.createElement(i.g,null,r.a.createElement(i.d,{path:"/new",component:x}),r.a.createElement(i.d,{path:"/recipe/:id",component:w}),r.a.createElement(i.d,{path:"/edit/:id",component:B}),r.a.createElement(i.d,{exact:!0,path:"/",component:k})))};l.a.render(r.a.createElement(y,null,r.a.createElement(D,null)),document.getElementById("root"))}},[[63,1,2]]]);
//# sourceMappingURL=main.f1894cb1.chunk.js.map